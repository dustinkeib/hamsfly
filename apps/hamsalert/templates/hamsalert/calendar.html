{% extends "base.html" %}

{% block title %}Calendar - HAMSfly{% endblock %}

{% block content %}
<div class="flex flex-col lg:flex-row gap-6">
    <!-- Calendar -->
    <div class="card bg-base-100 shadow-xl flex-1">
        <div class="card-body">
            <!-- Month Navigation -->
            <div class="flex items-center justify-between mb-4">
                <a href="{% url 'calendar_day' prev_year prev_month prev_day %}" class="btn btn-ghost btn-sm">&lt; Prev</a>
                <div class="flex items-center gap-2">
                    <h2 class="card-title text-2xl"><span class="sm:hidden">{{ month_name|slice:":3" }}</span><span class="hidden sm:inline">{{ month_name }}</span> {{ year }}</h2>
                    <a href="{% url 'calendar' %}" class="btn btn-success btn-xs"><span class="sm:hidden">Today &gt;</span><span class="hidden sm:inline">Go to Today</span></a>
                </div>
                <a href="{% url 'calendar_day' next_year next_month next_day %}" class="btn btn-ghost btn-sm">Next &gt;</a>
            </div>

            <!-- Calendar Grid -->
            <div class="grid grid-cols-7 gap-1">
                <!-- Day Headers -->
                <div class="text-center font-bold p-2 text-sm">Sun</div>
                <div class="text-center font-bold p-2 text-sm">Mon</div>
                <div class="text-center font-bold p-2 text-sm">Tue</div>
                <div class="text-center font-bold p-2 text-sm">Wed</div>
                <div class="text-center font-bold p-2 text-sm">Thu</div>
                <div class="text-center font-bold p-2 text-sm">Fri</div>
                <div class="text-center font-bold p-2 text-sm">Sat</div>

                <!-- Calendar Days -->
                {% for week in month_days %}
                    {% for day in week %}
                        {% if day == 0 %}
                            <div class="p-2"></div>
                        {% else %}
                            <a href="{% url 'calendar_day' year month day %}"
                               class="p-2 text-center rounded-lg hover:bg-base-200 relative block
                                      {% if day == selected_day %}ring-2 ring-accent ring-offset-2{% endif %}
                                      {% if year == today.year and month == today.month and day == today.day %}bg-primary text-primary-content{% endif %}">
                                {{ day }}
                                {% if day in days_with_events %}
                                    <span class="absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1.5 h-1.5 bg-accent rounded-full"></span>
                                {% endif %}
                            </a>
                        {% endif %}
                    {% endfor %}
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Event List Panel -->
    <div class="card bg-base-100 shadow-xl w-full lg:w-96">
        <div class="card-body">
            <h2 class="card-title">Events</h2>
            <div id="event-list">
                {% include "hamsalert/partials/day_events.html" %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
